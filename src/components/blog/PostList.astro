---
import formatDate from "@/utils/formatDate";
import { isNew } from "@/utils/formatDate";
import { Icon } from "astro-icon/components";
import { getCollection } from "astro:content";

const posts = await getCollection("posts");
---

<div class="flex flex-col gap-8 mx-auto items-center justify-center">
  {
    posts.map(post => {
      const {
        data: { photo, title, publishedAt },
      } = post;

      return (
        <a
          class="flex group flex-col border-b border-gray-300 pb-5 w-[min(800px,100%)] gap-4"
          href={`/blog/${post.slug}`}>
          <div class="aspect-video overflow-hidden w-full rounded-lg">
            <img
              class="group-hover:scale-110 transition  w-full h-full object-cover mb-1"
              src={photo}
              alt=""
            />
          </div>
          <div class="flex gap-4 justify-between items-center text-secondary text-lg">
            <p>{isNew(publishedAt) && "New"}</p>
            <p class="text-gray-400">{formatDate(publishedAt)}</p>
          </div>
          <h2 class="text-4xl text-secondary font-bold max-w-[35ch] ">
            {title}
          </h2>
          <p class="max-w-[70ch] text-lg text-gray-500">
            {post.data.description}
          </p>
          <p class="hover:underline py-4 flex items-center gap-2 text-primary self-start text-lg mt-4 font-semibold">
            Read More
            <Icon name="mdi:arrow-top-right-thick" />
          </p>
        </a>
      );
    })
  }
</div>
